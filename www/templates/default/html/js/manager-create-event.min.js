function isUrlValid(e){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)}const google_microdata_button=document.getElementById("google-microdata-button");function testMicrodata(e=!0){let t=!0;const a=document.getElementById("google-microdata-button"),i=document.getElementById("google-microdata-modal-output");let n="";var o,l,r,u=document.getElementById("title"),d=document.getElementById("start-date"),c=document.getElementById("physical_location_check"),s=document.getElementById("virtual_location_check"),m=document.getElementById("contact-name"),v=document.getElementById("contact-website"),F=document.querySelector('input[name="contact_type"]:checked');""==u.value&&(e&&(n+="<li>Missing title</li>"),t=!1),""==d.value&&(e&&(n+="<li>Missing start date</li>"),t=!1),"0"==c.value&&"0"==s.value&&(e&&(n+="<li>Missing a location (Could be virtual, physical, or both)</li>"),t=!1),"1"==c.value&&("new"==(u=document.getElementById("location")).value?(d=document.getElementById("location-name"),c=document.getElementById("location-address-1"),o=document.getElementById("location-city"),l=document.getElementById("location-state"),r=document.getElementById("location-zip"),""==d.value&&(e&&(n+="<li>Missing a location name</li>"),t=!1),""==c.value&&(e&&(n+="<li>Missing a location address</li>"),t=!1),""==o.value&&(e&&(n+="<li>Missing a location city</li>"),t=!1),""==l.value&&(e&&(n+="<li>Missing a location state</li>"),t=!1),""==r.value&&(e&&(n+="<li>Missing a location zip</li>"),t=!1)):"true"!=u.options[u.selectedIndex].dataset.microdata&&(e&&(n+="<li>The Location you selected does not meet the requirements for google microdata</li>"),t=!1)),"1"==s.value&&"new"==document.getElementById("v-location").value&&(d=document.getElementById("new-v-location-name"),c=document.getElementById("new-v-location-url"),""==d.value&&(e&&(n+="<li>Missing a virtual location name</li>"),t=!1),""==c.value&&(e&&(n+="<li>Missing a virtual location URL</li>"),t=!1),""==c.value||isUrlValid(c.value)||(e&&(n+="<li>Virtual location's URL is invalid</li>"),t=!1)),""===m.value&&""===v.value||(null===F&&(e&&(n+="<li>If organizer contact info is used the type must be specified</li>"),t=!1),(""!==m.value&&""===v.value||""===m.value&&""!==v.value)&&(e&&(n+="<li>Both the organizer name and organizer website must be set if either are used</li>"),t=!1)),t?(e&&(i.innerHTML="<span class='dcf-bold'>Your event is fulfilling all Google's requirements</span>"),a.innerHTML="Your event does reach google microdata requirements",a.style.backgroundColor="var(--bg-brand-zeta)",a.style.borderColor="var(--bg-brand-zeta)"):(e&&(i.innerHTML="<span class='dcf-bold'>Your event is missing these requirements:</span> <ul>"+n+"</ul>"),a.innerHTML="! Your event does not reach Google microdata requirements !",a.style.backgroundColor="var(--bg-brand-eta)",a.style.borderColor="var(--bg-brand-eta)")}document.addEventListener("ModalOpenEvent_"+google_microdata_button.dataset.togglesModal,()=>{testMicrodata(!0)}),document.addEventListener("click",e=>{testMicrodata(!1)}),document.addEventListener("input",e=>{testMicrodata(!1)}),document.getElementById("start-date").addEventListener("change",e=>{testMicrodata(!1)}),testMicrodata(!1),require(["jquery","wdn"],function(l,e){e.initializePlugin("modals"),l("input[type=radio][name=send_to_main]").change(function(){"on"==this.value?l(".required-for-main-calendar").show():"off"==this.value&&l(".required-for-main-calendar").hide()}),l("#create-event-form").submit(function(e){var t,a=[],i=(""!=l("#title").val()&&""!=l("#type").find(":selected").val()&&""!=l("#start-date").val()||(""==l("#title").val()&&notifier.mark_input_invalid(l("#title")),""==l("#start-date").val()&&notifier.mark_input_invalid(l("#start-date")),""==l("#type").find(":selected").val()&&notifier.mark_input_invalid(l("#type")),a.push('<a href="#title">Title</a>, <a href="#type">Type</a>, and <a href="#start-date">start date</a> are required.')),new Date(l("#start-date").val())),n=(""!=l("#start-date").val()&&""!=l("#end-date").val()&&(n=new Date(l("#end-date").val()),o=l("#start-time-am-pm-pm").is(":checked")?"pm":"am",t=""!=l("#start-time-hour").val()?parseInt(l("#start-time-hour").val())%12:0,t="pm"==o?t+12:t,o=""!=l("#start-time-minute").val()?parseInt(l("#start-time-minute").val()):0,i.setHours(t),i.setMinutes(o),t=l("#end-time-am-pm-pm").is(":checked")?"pm":"am",o=""!=l("#end-time-hour").val()?parseInt(l("#end-time-hour").val())%12:0,o="pm"==t?o+12:o,t=""!=l("#end-time-minute").val()?parseInt(l("#end-time-minute").val()):0,n.setHours(o),n.setMinutes(t),n<i&&(notifier.mark_input_invalid(l("#end-date")),a.push('Your <a href="#end-date">end date/time</a> must be on or after the <a href="#start-date">start date/time</a>.'))),""!=l("#start-date").val()&&l("#recurring").is(":checked")&&(""!=l("#recurring-type").val()&&""!=l("#recurs-until-date").val()||(""==l("#recurring-type").val()&&notifier.mark_input_invalid(l("#recurring-type")),""==l("#recurs-until-date").val()&&notifier.mark_input_invalid(l("#recurs-until-date")),a.push('Recurring events require a <a href="#recurring-type">recurring type</a> and <a href="#recurs-until-date">date</a> that they recur until.')),""!=l("#end-date").val()&&(o=new Date(l("#start-date").val()),t=new Date(l("#end-date").val()),o&&t&&o.getDate()!=t.getDate()&&a.push("A recurring event instance start and end date must be the same day. If you need multiple multi-day (ongoing) occurrences, you must define them as separate datetime instances.")),i.setHours(0),i.setMinutes(0),new Date(l("#recurs-until-date").val())<i&&(notifier.mark_input_invalid(l("#recurs-until-date")),a.push('The <a href="#recurs-until-date">"recurs until date"</a> must be on or after the start date.'))),"1"==l("#physical_location_check").val()&&("new"==l("#location").val()&&""==l("#location-name").val()&&(notifier.mark_input_invalid(l("#location-name")),a.push('You must give your new location a <a href="#location-name">name</a>.')),"new"==l("#location").val()&&""==l("#location-address-1").val()&&(notifier.mark_input_invalid(l("#location-address-1")),a.push('You must give your new location a <a href="#location-address-1">address</a>.')),"new"==l("#location").val()&&""==l("#location-city").val()&&(notifier.mark_input_invalid(l("#location-city")),a.push('You must give your new location a <a href="#location-city">city</a>.')),"new"==l("#location").val()&&""==l("#location-state").val()&&(notifier.mark_input_invalid(l("#location-state")),a.push('You must give your new location a <a href="#location-state">state</a>.')),"new"==l("#location").val()&&""==l("#location-zip").val()&&(notifier.mark_input_invalid(l("#location-zip")),a.push('You must give your new location a <a href="#location-zip">zip</a>.')),"new"!=l("#location").val()||""===l("#location-webpage").val()||isUrlValid(l("#location-webpage").val())||(notifier.mark_input_invalid(l("#location-webpage")),a.push('<a href="#location-webpage"> Location URL</a> is not a valid URL.'))),"1"==l("#virtual_location_check").val()&&("new"==l("#v-location").val()&&""==l("#new-v-location-name").val()&&(notifier.mark_input_invalid(l("#new-v-location-name")),a.push('You must give your new virtual location a <a href="#new-v-location-name">name</a>.')),"new"==l("#v-location").val()&&""==l("#new-v-location-url").val()?(notifier.mark_input_invalid(l("#new-v-location-url")),a.push('You must give your new virtual location a <a href="#new-v-location-url">URL</a>.')):"new"!=l("#v-location").val()||""===l("#new-v-location-url").val()||isUrlValid(l("#new-v-location-url").val())||(notifier.mark_input_invalid(l("#new-v-location-url")),a.push('<a href="#new-v-location-url">Virtual Location URL</a> is not a valid URL.'))),void 0===l('input[name="send_to_main"]:checked').val()?(notifier.mark_input_invalid(l("#send_to_main_on")),a.push('<a href="#send_to_main">Consider for main calendar</a> is required.')):"on"===l('input[name="send_to_main"]:checked').val()&&(""==l("#description").val().trim()&&(notifier.mark_input_invalid(l("#description")),a.push('<a href="#description">Description</a> is required when event is considered for main calendar.')),""==l("#contact-name").val().trim()&&(notifier.mark_input_invalid(l("#contact-name")),a.push('<a href="#contact-name">Contact Name</a> is required when event is considered for main calendar.')),""==l("#cropped-image-data").val().trim()&&""==l("#imagedata").val().trim()&&(notifier.mark_input_invalid(l("#imagedata")),a.push('<a href="#imagedata">Image</a> is required when event is considered for main calendar.'))),void 0!==l('input[name="contact_type"]:checked').val()&&"person"!==l('input[name="contact_type"]:checked').val()&&"organization"!==l('input[name="contact_type"]:checked').val()&&(notifier.mark_input_invalid(l("#contact-type")),a.push('<a href="#contact-type">Contact Type</a> must be person or organization.')),l("#contact_website").val()),o=(""==n||isUrlValid(n)||(notifier.mark_input_invalid(l("#contact_website")),a.push('<a href="#contact_website">Contact Website</a> is not a valid URL.')),l("#website").val());""==o||isUrlValid(o)||(notifier.mark_input_invalid(l("#website")),a.push('<a href="#website">Event Website</a> is not a valid URL.')),0<a.length&&(e.preventDefault(),notifier.alert("Sorry! We couldn't create your event","<ul><li>"+a.join("</li><li>")+"</li></ul>"))})});