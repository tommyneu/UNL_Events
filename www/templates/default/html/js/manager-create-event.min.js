function isUrlValid(e){let t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol}const time_mode_radios=Array.from(document.querySelectorAll('input[type="radio"][name="time_mode"]')),time_container=document.getElementById("time-container"),start_time_container=document.getElementById("start-time-container"),start_time_label=document.getElementById("start-time-label"),end_time_container=document.getElementById("end-time-container"),end_time_label=document.getElementById("end-time-label"),google_microdata_button=(time_mode_radios.forEach(e=>{e.addEventListener("input",()=>{var e=time_mode_radios.filter(e=>e.checked)[0];e.id===time_mode_regular?(time_container.classList.remove("dcf-d-none"),start_time_container.classList.remove("dcf-d-none"),start_time_label.innerText="Start Time",end_time_container.classList.remove("dcf-d-none"),end_time_label.innerText="End Time"):e.id===time_mode_deadline?(time_container.classList.remove("dcf-d-none"),start_time_container.classList.add("dcf-d-none"),end_time_container.classList.remove("dcf-d-none"),end_time_label.innerText="Time Of The Deadline"):e.id===time_mode_kickoff?(time_container.classList.remove("dcf-d-none"),start_time_container.classList.remove("dcf-d-none"),start_time_label.innerText="Kick Off Time",end_time_container.classList.add("dcf-d-none")):time_container.classList.add("dcf-d-none")})}),document.getElementById("google-microdata-button"));function testMicrodata(e=!0){let t=!0;const a=document.getElementById("google-microdata-button"),i=document.getElementById("google-microdata-modal-output");let n="";var o,l,r,c=document.getElementById("title"),d=document.getElementById("start-date"),s=document.getElementById("physical_location_check"),u=document.getElementById("virtual_location_check"),m=document.getElementById("contact-name"),v=document.getElementById("contact-website"),_=document.querySelector('input[name="contact_type"]:checked');""==c.value&&(e&&(n+="<li>Missing title</li>"),t=!1),""==d.value&&(e&&(n+="<li>Missing start date</li>"),t=!1),"0"==s.value&&"0"==u.value&&(e&&(n+="<li>Missing a location (Could be virtual, physical, or both)</li>"),t=!1),"1"==s.value&&("new"==(c=document.getElementById("location")).value?(d=document.getElementById("location-name"),s=document.getElementById("location-address-1"),o=document.getElementById("location-city"),l=document.getElementById("location-state"),r=document.getElementById("location-zip"),""==d.value&&(e&&(n+="<li>Missing a location name</li>"),t=!1),""==s.value&&(e&&(n+="<li>Missing a location address</li>"),t=!1),""==o.value&&(e&&(n+="<li>Missing a location city</li>"),t=!1),""==l.value&&(e&&(n+="<li>Missing a location state</li>"),t=!1),""==r.value&&(e&&(n+="<li>Missing a location zip</li>"),t=!1)):"true"!=c.options[c.selectedIndex].dataset.microdata&&(e&&(n+="<li>The Location you selected does not meet the requirements for microdata</li>"),t=!1)),"1"==u.value&&"new"==document.getElementById("v-location").value&&(d=document.getElementById("new-v-location-name"),s=document.getElementById("new-v-location-url"),""==d.value&&(e&&(n+="<li>Missing a virtual location name</li>"),t=!1),""==s.value&&(e&&(n+="<li>Missing a virtual location URL</li>"),t=!1),""==s.value||isUrlValid(s.value)||(e&&(n+="<li>Virtual location's URL is invalid</li>"),t=!1)),""===m.value&&""===v.value||(null===_&&(e&&(n+="<li>If organizer contact info is used the type must be specified</li>"),t=!1),(""!==m.value&&""===v.value||""===m.value&&""!==v.value)&&(e&&(n+="<li>Both the organizer name and organizer website must be set if either are used</li>"),t=!1)),t?(e&&(i.innerHTML="<span class='dcf-bold'>Your event is fulfilling all microdata requirements</span>"),a.innerHTML="Your event does reach microdata requirements",a.classList.remove("unl-bg-blue"),a.classList.add("unl-bg-green"),a.classList.remove("events-b-blue"),a.classList.add("events-b-green")):(e&&(i.innerHTML="<span class='dcf-bold'>Your event is missing these requirements:</span> <ul>"+n+"</ul>"),a.innerHTML="! Your event does not reach microdata requirements !",a.classList.add("unl-bg-blue"),a.classList.remove("unl-bg-green"),a.classList.add("events-b-blue"),a.classList.remove("events-b-green"))}document.addEventListener("ModalOpenEvent_"+google_microdata_button.dataset.togglesModal,()=>{testMicrodata(!0)}),document.addEventListener("click",e=>{testMicrodata(!1)}),document.addEventListener("input",e=>{testMicrodata(!1)}),document.getElementById("start-date").addEventListener("change",e=>{testMicrodata(!1)}),testMicrodata(!1),require(["jquery","wdn"],function(r,e){e.initializePlugin("modals"),r("input[type=radio][name=send_to_main]").change(function(){"on"==this.value?r(".required-for-main-calendar").show():"off"==this.value&&r(".required-for-main-calendar").hide()}),r("#create-event-form").submit(function(e){let t=[],a=(""!=r("#title").val()&&""!=r("#type").find(":selected").val()&&""!=r("#start-date").val()||(""==r("#title").val()&&notifier.mark_input_invalid(r("#title")),""==r("#start-date").val()&&notifier.mark_input_invalid(r("#start-date")),""==r("#type").find(":selected").val()&&notifier.mark_input_invalid(r("#type")),t.push('<a href="#title">Title</a>, <a href="#type">Type</a>, and <a href="#start-date">start date</a> are required.')),new Date(r("#start-date").val()));var i=r("#start-time-am-pm-pm").is(":checked")?"pm":"am";let n=""!=r("#start-time-hour").val()?parseInt(r("#start-time-hour").val())%12:0;n="pm"==i?n+12:n;i=""!=r("#start-time-minute").val()?parseInt(r("#start-time-minute").val()):0;a.setHours(n),a.setMinutes(i);let o=new Date(r("#start-date").val());i=r("#end-time-am-pm-pm").is(":checked")?"pm":"am";let l=""!=r("#end-time-hour").val()?parseInt(r("#end-time-hour").val())%12:0;l="pm"==i?l+12:l;var i=""!=r("#end-time-minute").val()?parseInt(r("#end-time-minute").val()):0,i=(o.setHours(l),o.setMinutes(i),""!=r("#start-date").val()&&r("#"+time_mode_regular).is(":checked")&&a>o&&(notifier.mark_input_invalid(r("#end-time-container")),t.push('Your <a href="#end-time-container">end time</a> must be on or after the <a href="#start-time-container">start time</a>.')),""!=r("#start-date").val()&&r("#recurring").is(":checked")&&(""!=r("#recurring-type").val()&&""!=r("#recurs-until-date").val()||(""==r("#recurring-type").val()&&notifier.mark_input_invalid(r("#recurring-type")),""==r("#recurs-until-date").val()&&notifier.mark_input_invalid(r("#recurs-until-date")),t.push('Recurring events require a <a href="#recurring-type">recurring type</a> and <a href="#recurs-until-date">date</a> that they recur until.')),a.setHours(0),a.setMinutes(0),i=new Date(r("#recurs-until-date").val()),a>i&&(notifier.mark_input_invalid(r("#recurs-until-date")),t.push('The <a href="#recurs-until-date">"recurs until date"</a> must be on or after the start date.'))),"1"==r("#physical_location_check").val()&&("new"==r("#location").val()&&""==r("#location-name").val()&&(notifier.mark_input_invalid(r("#location-name")),t.push('You must give your new location a <a href="#location-name">name</a>.')),"new"==r("#location").val()&&""==r("#location-address-1").val()&&(notifier.mark_input_invalid(r("#location-address-1")),t.push('You must give your new location a <a href="#location-address-1">address</a>.')),"new"==r("#location").val()&&""==r("#location-city").val()&&(notifier.mark_input_invalid(r("#location-city")),t.push('You must give your new location a <a href="#location-city">city</a>.')),"new"==r("#location").val()&&""==r("#location-state").val()&&(notifier.mark_input_invalid(r("#location-state")),t.push('You must give your new location a <a href="#location-state">state</a>.')),"new"==r("#location").val()&&""==r("#location-zip").val()&&(notifier.mark_input_invalid(r("#location-zip")),t.push('You must give your new location a <a href="#location-zip">zip</a>.')),"new"!=r("#location").val()||""===r("#location-webpage").val()||isUrlValid(r("#location-webpage").val())||(notifier.mark_input_invalid(r("#location-webpage")),t.push('<a href="#location-webpage"> Location URL</a> is not a valid URL.'))),"1"==r("#virtual_location_check").val()&&("new"==r("#v-location").val()&&""==r("#new-v-location-name").val()&&(notifier.mark_input_invalid(r("#new-v-location-name")),t.push('You must give your new virtual location a <a href="#new-v-location-name">name</a>.')),"new"==r("#v-location").val()&&""==r("#new-v-location-url").val()?(notifier.mark_input_invalid(r("#new-v-location-url")),t.push('You must give your new virtual location a <a href="#new-v-location-url">URL</a>.')):"new"!=r("#v-location").val()||""===r("#new-v-location-url").val()||isUrlValid(r("#new-v-location-url").val())||(notifier.mark_input_invalid(r("#new-v-location-url")),t.push('<a href="#new-v-location-url">Virtual Location URL</a> is not a valid URL.'))),void 0===r('input[name="send_to_main"]:checked').val()?(notifier.mark_input_invalid(r("#send_to_main_on")),t.push('<a href="#send_to_main">Consider for main calendar</a> is required.')):"on"===r('input[name="send_to_main"]:checked').val()&&(""==r("#description").val().trim()&&(notifier.mark_input_invalid(r("#description")),t.push('<a href="#description">Description</a> is required when event is considered for main calendar.')),""==r("#contact-name").val().trim()&&(notifier.mark_input_invalid(r("#contact-name")),t.push('<a href="#contact-name">Contact Name</a> is required when event is considered for main calendar.')),""==r("#cropped-image-data").val().trim()&&""==r("#imagedata").val().trim()&&(notifier.mark_input_invalid(r("#imagedata")),t.push('<a href="#imagedata">Image</a> is required when event is considered for main calendar.'))),void 0!==r('input[name="contact_type"]:checked').val()&&"person"!==r('input[name="contact_type"]:checked').val()&&"organization"!==r('input[name="contact_type"]:checked').val()&&(notifier.mark_input_invalid(r("#contact-type")),t.push('<a href="#contact-type">Contact Type</a> must be person or organization.')),r("#contact-website").val()),i=(""==i||isUrlValid(i)||(notifier.mark_input_invalid(r("#contact-website")),t.push('<a href="#contact_website">Contact Website</a> is not a valid URL.')),r("#website").val());""==i||isUrlValid(i)||(notifier.mark_input_invalid(r("#website")),t.push('<a href="#website">Event Website</a> is not a valid URL.')),0<t.length&&(e.preventDefault(),notifier.alert("Sorry! We couldn't create your event","<ul><li>"+t.join("</li><li>")+"</li></ul>"))})});