function isUrlValid(e){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)}const location_buttons=document.querySelectorAll(".events-btn-location");function setUpLocationListeners(e){if("physical_location"==e){let e=document.getElementById("location");e.addEventListener("change",()=>{"new"==e.value?document.getElementById("new-location-fields").style.display="block":document.getElementById("new-location-fields").style.display="none"}),"new"==e.value?document.getElementById("new-location-fields").style.display="block":document.getElementById("new-location-fields").style.display="none"}else if("virtual_location"==e){let e=document.getElementById("v-location");e.addEventListener("change",()=>{"new"==e.value?document.getElementById("v-location-fields").style.display="block":document.getElementById("v-location-fields").style.display="none"}),"new"==e.value?document.getElementById("v-location-fields").style.display="block":document.getElementById("v-location-fields").style.display="none"}}location_buttons.forEach(a=>{a.addEventListener("click",()=>{if("true"===a.dataset.add){a.dataset.add="false",a.innerHTML=a.innerHTML.replace("Add","Remove"),a.classList.remove("dcf-btn-primary"),a.classList.add("dcf-btn-secondary"),document.querySelector(`input[type='hidden'][name='${a.dataset.controls}_check']`).value="1";const t=document.getElementById(a.dataset.controls+"_template");var e=t.content.cloneNode("true");document.getElementById(a.dataset.controls+"_container").append(e),setUpLocationListeners(a.dataset.controls)}else a.dataset.add="true",a.innerHTML=a.innerHTML.replace("Remove","Add"),a.classList.remove("dcf-btn-secondary"),a.classList.add("dcf-btn-primary"),document.querySelector(`input[type='hidden'][name='${a.dataset.controls}']`).value="0",document.getElementById(a.dataset.controls+"_container").innerHTML=""})}),require(["jquery","wdn"],function(u,e){e.initializePlugin("datepickers"),u("#recurring").change(function(){this.checked&&setRecurringOptions(u("#start-date"),u("#monthly-group"),recurringType)}),u("#start-date").change(function(){setRecurringOptions(u(this),u("#monthly-group"),recurringType)}),setRecurringOptions(u("#start-date"),u("#monthly-group")),u("#recurring-type").val(recurringType),u("input[type=radio][name=send_to_main]").change(function(){"on"==this.value?u(".required-for-main-calendar").show():"off"==this.value&&u(".required-for-main-calendar").hide()}),u("#create-event-form").submit(function(e){var t,a,n,i=[],r=(""!=u("#title").val()&&""!=u("#start-date").val()||(""==u("#title").val()&&notifier.mark_input_invalid(u("#title")),""==u("#start-date").val()&&notifier.mark_input_invalid(u("#start-date")),i.push('<a href="#title">Title</a>, and <a href="#start-date">start date</a> are required.')),"1"!=u("#physical_location_check").val()&&"1"!=u("#virtual_location_check").val()&&i.push('A <a href="#physical_location_add_button">physical</a> or <a href="virtual_location_add_button">virtual</a> location must be provided'),new Date(u("#start-date").val())),o=(""!=u("#start-date").val()&&""!=u("#end-date").val()&&(t=new Date(u("#end-date").val()),a=u("#start-time-am-pm-pm").is(":checked")?"pm":"am",n=""!=u("#start-time-hour").val()?parseInt(u("#start-time-hour").val())%12:0,n="pm"==a?n+12:n,a=""!=u("#start-time-minute").val()?parseInt(u("#start-time-minute").val()):0,r.setHours(n),r.setMinutes(a),n=u("#end-time-am-pm-pm").is(":checked")?"pm":"am",a=""!=u("#end-time-hour").val()?parseInt(u("#end-time-hour").val())%12:0,a="pm"==n?a+12:a,n=""!=u("#end-time-minute").val()?parseInt(u("#end-time-minute").val()):0,t.setHours(a),t.setMinutes(n),t<r&&(notifier.mark_input_invalid(u("#end-date")),i.push('Your <a href="#end-date">end date/time</a> must be on or after the <a href="#start-date">start date/time</a>.'))),""!=u("#start-date").val()&&u("#recurring").is(":checked")&&(""!=u("#recurring-type").val()&&""!=u("#recurs-until-date").val()||(""==u("#recurring-type").val()&&notifier.mark_input_invalid(u("#recurring-type")),""==u("#recurs-until-date").val()&&notifier.mark_input_invalid(u("#recurs-until-date")),i.push('Recurring events require a <a href="#recurring-type">recurring type</a> and <a href="#recurs-until-date">date</a> that they recur until.')),""!=u("#end-date").val()&&(a=new Date(u("#start-date").val()),n=new Date(u("#end-date").val()),a&&n&&a.getDate()!=n.getDate()&&i.push("A recurring event instance start and end date must be the same day. If you need multiple multi-day (ongoing) occurrences, you must define them as separate datetime instances.")),r.setHours(0),r.setMinutes(0),new Date(u("#recurs-until-date").val())<r&&(notifier.mark_input_invalid(u("#recurs-until-date")),i.push('The <a href="#recurs-until-date">"recurs until date"</a> must be on or after the start date.'))),"1"==u("#physical_location_check").val()&&("new"==u("#location").val()&&""==u("#location-name").val()&&(notifier.mark_input_invalid(u("#location-name")),i.push('You must give your new location a <a href="#location-name">name</a>.')),"new"==u("#location").val()&&""==u("#location-address-1").val()&&(notifier.mark_input_invalid(u("#location-address-1")),i.push('You must give your new location a <a href="#location-address-1">address</a>.')),"new"==u("#location").val()&&""==u("#location-city").val()&&(notifier.mark_input_invalid(u("#location-city")),i.push('You must give your new location a <a href="#location-city">city</a>.')),"new"==u("#location").val()&&""==u("#location-state").val()&&(notifier.mark_input_invalid(u("#location-state")),i.push('You must give your new location a <a href="#location-state">state</a>.')),"new"==u("#location").val()&&""==u("#location-zip").val()&&(notifier.mark_input_invalid(u("#location-zip")),i.push('You must give your new location a <a href="#location-zip">zip</a>.'))),"1"==u("#virtual_location_check").val()&&("new"==u("#v-location").val()&&""==u("#v-location-name").val()&&(notifier.mark_input_invalid(u("#v-location-name")),i.push('You must give your new virtual location a <a href="#v-location-name">name</a>.')),"new"==u("#v-location").val()&&""==u("#v-location-url").val()?(notifier.mark_input_invalid(u("#v-location-url")),i.push('You must give your new virtual location a <a href="#v-location-url">URL</a>.')):"new"!=u("#v-location").val()||""!=u("#v-location-url").val()||isUrlValid(o)||(notifier.mark_input_invalid(u("#v-location-url")),i.push('<a href="#v-location-url">Virtual Location URL</a> is not a valid URL.'))),void 0===u('input[name="send_to_main"]:checked').val()?(notifier.mark_input_invalid(u("#send_to_main_on")),i.push('<a href="#send_to_main">Consider for main calendar</a> is required.')):"on"===u('input[name="send_to_main"]:checked').val()&&(""==u("#description").val().trim()&&(notifier.mark_input_invalid(u("#description")),i.push('<a href="#description">Description</a> is required when event is considered for main calendar.')),""==u("#contact-name").val().trim()&&(notifier.mark_input_invalid(u("#contact-name")),i.push('<a href="#contact-name">Contact Name</a> is required when event is considered for main calendar.')),""==u("#cropped-image-data").val().trim()&&""==u("#imagedata").val().trim()&&(notifier.mark_input_invalid(u("#imagedata")),i.push('<a href="#imagedata">Image</a> is required when event is considered for main calendar.'))),u("#website").val());""==o||isUrlValid(o)||(notifier.mark_input_invalid(u("#website")),i.push('<a href="#website">Event Website</a> is not a valid URL.')),0<i.length&&(e.preventDefault(),notifier.alert("Sorry! We couldn't create your event","<ul><li>"+i.join("</li><li>")+"</li></ul>"))})});