require(["jquery","wdn"],function(p,a){"use strict";var m=p("<progress>");window.location;p(function(){var o,r,e,i=p("link[rel=home]"),t=p("#script_main"),c=p(".wp-calendar"),l="day";function u(t,e){window.history.pushState&&window.location.href!==t&&window.history.pushState({route:e},"",t)}function h(){o=new Date(c.data("datetime"));var t=new Date,e=o.getMonth(),n=o.getFullYear(),a=p("td",c);a.removeClass("today active"),n===t.getFullYear()&&e===t.getMonth()&&a.not(".prev,.next").each(function(){if(p.trim(p(this).text())==t.getDate())return p(this).addClass("today"),!1}),n==r.getFullYear()&&e==r.getMonth()&&a.not(".prev,.next").each(function(){if(p.trim(p(this).text())==r.getDate())return p(this).addClass("active"),!1})}function s(t){d(),m.hide(),e=setTimeout(function(){m.prependTo(t),m.fadeIn(200)},1e3)}function d(){clearTimeout(e)}function f(){var t=p("#heading-date").data("datetime");r=t?new Date(t):new Date}function g(t){var e=p("aside .calendar"),t=t instanceof Date?i+t.getFullYear()+"/"+(t.getMonth()+1)+"/":t;s(e),p.get(t+"?monthwidget&format=hcalendar",function(t){d(),e.html(t),c=p(".wp-calendar"),h()})}function v(t){var e=new Date,n=p("#updatecontent"),t=t instanceof Date?i+t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+"/":t,a=(u(t,"day"),"format=hcalendar");"?"===t.charAt(t.length-1)?t+=a:t=0<t.indexOf("?")?t+"&"+a:t+"?"+a,s(n),p.get(t,function(t){d(),n.html(t),f(),r.getFullYear()==e.getFullYear()&&r.getMonth()==e.getMonth()&&r.getDate()==e.getDate()&&(window.location=window.location),o.getFullYear()!==r.getFullYear()||o.getMonth()!==r.getMonth()?g(r):h(),r.getFullYear()!=e.getFullYear()&&r.getMonth()!=e.getMonth()&&r.getDate()!=e.getDate()&&p("#events-promo-bar").hide()})}function w(t){var e=p("#updatecontent");u(t,"event"),s(e),p.get(t+"?format=hcalendar",function(t){d(),e.html(t)})}function n(t,e){var n=new Date(t);return n.setMonth(n.getMonth()+e),n.getDate()<t.getDate()&&n.setDate(0),n}i=i.length?i[0].href:"/",t=t.length?a.toAbs("./",t[0].src):"/templates/default/html/js/",(t=p("aside .calendar")).length&&(f(),h(),t.on("click","td a",function(t){t.preventDefault(),v(this.href)}),t.on("click","a.next, a.prev",function(t){t.preventDefault(),g(this.href)})),p(".view-unl_ucbcn_frontend_eventinstance").length?l="event":p(".view-unl_ucbcn_frontend_search").length&&(l="search"),p(document).on("keyup",function(t){if(!p(t.target).is("input, select, textarea, button")){var e=p(".day-nav");if(e.length)switch(t.which){case 39:v(t.altKey?n(r,1):p(".next",e).attr("href"));break;case 37:v(t.altKey?n(r,-1):p(".prev",e).attr("href"))}}}),p("#updatecontent").on("click",".vevent a.summary",function(t){t.preventDefault(),w(this.href)}),p(window).on("popstate",function(t){var e,n,a=t.originalEvent.state&&t.originalEvent.state.route||l,o=window.location.href;if(null===t.originalEvent.state)return event.preventDefault(),!1;switch(a){case"event":w(o);break;case"day":v(o);break;case"search":e=o,n=p("#updatecontent"),u(e,"search"),s(n),p.get(e+(-1==e.indexOf("?")?"?":"&")+"format=hcalendar",function(t){d(),n.html(t)})}})})});