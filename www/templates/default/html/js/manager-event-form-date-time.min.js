const location_buttons=document.querySelectorAll(".events-btn-location");function setUpLocationListeners(e){if("physical_location"==e){const t=document.getElementById("location"),a=document.getElementById("new-location-fields");t.addEventListener("change",()=>{"new"==t.value?a.style.display="block":a.style.display="none"}),"new"==t.value?a.style.display="block":a.style.display="none",require(["dcf-popup"],e=>{var t=a.querySelectorAll(".dcf-popup"),n=new e.DCFPopupTheme;const o=new e.DCFPopup(t,n);o.initialize()})}else if("virtual_location"==e){const n=document.getElementById("v-location"),r=document.getElementById("new-v-location-fields");n.addEventListener("change",()=>{"new"==n.value?r.style.display="block":r.style.display="none"}),"new"==n.value?r.style.display="block":r.style.display="none",require(["dcf-popup"],e=>{var t=r.querySelectorAll(".dcf-popup"),n=new e.DCFPopupTheme;const o=new e.DCFPopup(t,n);o.initialize()})}}location_buttons.forEach(n=>{n.addEventListener("click",()=>{if("true"===n.dataset.add){n.dataset.add="false",n.innerHTML=n.innerHTML.replace("Add","Remove"),n.classList.remove("dcf-btn-primary"),n.classList.add("dcf-btn-secondary"),document.querySelector(`input[type='hidden'][name='${n.dataset.controls}_check']`).value="1";const t=document.getElementById(n.dataset.controls+"_template");var e=t.content.cloneNode("true");document.getElementById(n.dataset.controls+"_container").append(e),setUpLocationListeners(n.dataset.controls)}else n.dataset.add="true",n.innerHTML=n.innerHTML.replace("Remove","Add"),n.classList.remove("dcf-btn-secondary"),n.classList.add("dcf-btn-primary"),document.querySelector(`input[type='hidden'][name='${n.dataset.controls}_check']`).value="0",document.getElementById(n.dataset.controls+"_container").innerHTML=""}),"1"==document.querySelector(`input[type='hidden'][name='${n.dataset.controls}_check']`).value&&n.click()});const ordinal=function(e){var t=e%100;return 11<=t&&t<=13?e+"th":t%10==1?e+"st":t%10==2?e+"nd":t%10==3?e+"rd":e+"th"},setRecurringOptions=(Date.prototype.isValid=function(){return!isNaN(this.getTime())},function(c,i,s){if(c.val()){var l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];let r=new Date(c.val());if(r.isValid()){var d=r.getFullYear(),u=r.getMonth()+1,p=r.getDate(),y=l[r.getDay()];const m={1:"First",2:"Second",3:"Third",4:"Fourth",5:"Last"};let e=28,t=new Date(d,u-1,28);for(;e==t.getDate();)t=new Date(d,u-1,++e);e--;let n=0,o=0;for(let t=1;t<=e;t++){let e=new Date(d,u-1,t);l[e.getDay()]==y&&t<=p&&n++,l[e.getDay()]==y&&o++}i.children(".dynamicRecurring").remove();let a="";null!=m[n]&&(s==m[n].toLowerCase()&&(a=' selected="selected" '),i.prepend("<option class='dynamicRecurring' "+a+"value='"+m[n].toLowerCase()+"'>"+m[n]+" "+y+" of every month</option>")),4==n&&4==o&&("last"==s&&(a=' selected="selected" '),i.prepend("<option class='dynamicRecurring' "+a+"value='last'>Last "+y+" of every month</option>")),e==p&&("lastday"==s&&(a=' selected="selected" '),i.prepend("<option class='dynamicRecurring' "+a+"value='lastday'>Last day of every month</option>"));c=ordinal(p)+" of every month";"date"==s&&(a=' selected="selected" '),i.prepend("<option class='dynamicRecurring' "+a+"value='date'>"+c+"</option>")}}});require(["jquery","wdn"],function(e,t){t.initializePlugin("datepickers"),e("#recurring").change(function(){this.checked&&setRecurringOptions(e("#start-date"),e("#monthly-group"),recurringType)}),""==recurringMonth?(e("#start-date").change(function(){setRecurringOptions(e(this),e("#monthly-group"),recurringType)}),setRecurringOptions(e("#start-date"),e("#monthly-group")),e("#recurring-type").val(recurringType)):(e("#start-date").change(function(){setRecurringOptions(e(this),e("#monthly-group"),recurringMonth)}),setRecurringOptions(e("#start-date"),e("#monthly-group"),recurringMonth))});