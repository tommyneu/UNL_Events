const location_buttons=document.querySelectorAll(".events-btn-location");function setUpLocationListeners(e){if("physical_location"==e){const t=document.getElementById("location"),n=document.getElementById("new-location-fields");t.addEventListener("change",()=>{"new"==t.value?n.style.display="block":n.style.display="none"}),"new"==t.value?n.style.display="block":n.style.display="none",WDN.initializePlugin("popups")}else if("virtual_location"==e){const a=document.getElementById("v-location"),o=document.getElementById("new-v-location-fields");a.addEventListener("change",()=>{"new"==a.value?o.style.display="block":o.style.display="none"}),"new"==a.value?o.style.display="block":o.style.display="none",WDN.initializePlugin("popups")}}location_buttons.forEach(n=>{n.addEventListener("click",()=>{if("true"===n.dataset.add){n.dataset.add="false",n.innerHTML=n.innerHTML.replace("Add","Remove"),n.classList.remove("dcf-btn-primary"),n.classList.add("dcf-btn-secondary"),document.querySelector(`input[type='hidden'][name='${n.dataset.controls}_check']`).value="1";const t=document.getElementById(n.dataset.controls+"_template");var e=t.content.cloneNode("true");document.getElementById(n.dataset.controls+"_container").append(e),setUpLocationListeners(n.dataset.controls)}else n.dataset.add="true",n.innerHTML=n.innerHTML.replace("Remove","Add"),n.classList.remove("dcf-btn-secondary"),n.classList.add("dcf-btn-primary"),document.querySelector(`input[type='hidden'][name='${n.dataset.controls}_check']`).value="0",document.getElementById(n.dataset.controls+"_container").innerHTML=""}),"1"==document.querySelector(`input[type='hidden'][name='${n.dataset.controls}_check']`).value&&n.click()});const ordinal=function(e){var t=e%100;return 11<=t&&t<=13?e+"th":t%10==1?e+"st":t%10==2?e+"nd":t%10==3?e+"rd":e+"th"},setRecurringOptions=(Date.prototype.isValid=function(){return!isNaN(this.getTime())},function(i,s,c){if(i.val()){var l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];let r=new Date(i.val());if(r.isValid()){var d=r.getFullYear(),u=r.getMonth()+1,y=r.getDate(),p=l[r.getDay()];const g={1:"First",2:"Second",3:"Third",4:"Fourth",5:"Last"};let e=28,t=new Date(d,u-1,28);for(;e==t.getDate();)t=new Date(d,u-1,++e);e--;let n=0,a=0;for(let t=1;t<=e;t++){let e=new Date(d,u-1,t);l[e.getDay()]==p&&t<=y&&n++,l[e.getDay()]==p&&a++}s.children(".dynamicRecurring").remove();let o="";null!=g[n]&&(c==g[n].toLowerCase()&&(o=' selected="selected" '),s.prepend("<option class='dynamicRecurring' "+o+"value='"+g[n].toLowerCase()+"'>"+g[n]+" "+p+" of every month</option>")),4==n&&4==a&&("last"==c&&(o=' selected="selected" '),s.prepend("<option class='dynamicRecurring' "+o+"value='last'>Last "+p+" of every month</option>")),e==y&&("lastday"==c&&(o=' selected="selected" '),s.prepend("<option class='dynamicRecurring' "+o+"value='lastday'>Last day of every month</option>"));i=ordinal(y)+" of every month";"date"==c&&(o=' selected="selected" '),s.prepend("<option class='dynamicRecurring' "+o+"value='date'>"+i+"</option>")}}});require(["jquery","wdn"],function(e,t){t.initializePlugin("datepickers"),e("#recurring").change(function(){this.checked&&setRecurringOptions(e("#start-date"),e("#monthly-group"),recurringType)}),""==recurringMonth?(e("#start-date").change(function(){setRecurringOptions(e(this),e("#monthly-group"),recurringType)}),setRecurringOptions(e("#start-date"),e("#monthly-group")),e("#recurring-type").val(recurringType)):(e("#start-date").change(function(){setRecurringOptions(e(this),e("#monthly-group"),recurringMonth)}),setRecurringOptions(e("#start-date"),e("#monthly-group"),recurringMonth))});