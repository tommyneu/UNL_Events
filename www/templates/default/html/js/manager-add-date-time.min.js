function isUrlValid(e){let t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol}const time_mode_radios=Array.from(document.querySelectorAll('input[type="radio"][name="time_mode"]')),time_container=document.getElementById("time-container");time_mode_radios.forEach(e=>{e.addEventListener("input",()=>{"time-mode-regular"===time_mode_radios.filter(e=>e.checked)[0].id?time_container.classList.remove("dcf-d-none"):time_container.classList.add("dcf-d-none")})}),require(["jquery"],function(o){o("#add-datetime-form").submit(function(e){let i=[],n=(""==o("#start-date").val()&&(""==o("#start-date").val()&&notifier.mark_input_invalid(o("#start-date")),i.push('<a href="#location">Location</a> and <a href="#start-date">start date</a> are required.')),new Date(o("#start-date").val()));if(""!=o("#start-date").val()&&""!=o("#end-date").val()){let e=new Date(o("#end-date").val());var r=o("#start-time-am-pm-pm").is(":checked")?"pm":"am";let t=""!=o("#start-time-hour").val()?parseInt(o("#start-time-hour").val())%12:0;t="pm"==r?t+12:t;r=""!=o("#start-time-minute").val()?parseInt(o("#start-time-minute").val()):0,r=(n.setHours(t),n.setMinutes(r),o("#end-time-am-pm-pm").is(":checked")?"pm":"am");let a=""!=o("#end-time-hour").val()?parseInt(o("#end-time-hour").val())%12:0;a="pm"==r?a+12:a;r=""!=o("#end-time-minute").val()?parseInt(o("#end-time-minute").val()):0;e.setHours(a),e.setMinutes(r),n>e&&(notifier.mark_input_invalid(o("#end-date")),i.push('Your <a href="#end-date">end date/time</a> must be on or after the <a href="#start-date">start date/time</a>.'))}if(""!=o("#start-date").val()&&o("#recurring").is(":checked")){if(""!=o("#recurring-type").val()&&""!=o("#recurs-until-date").val()||(""==o("#recurring-type").val()&&notifier.mark_input_invalid(o("#recurring-type")),""==o("#recurs-until-date").val()&&notifier.mark_input_invalid(o("#recurs-until-date")),i.push('Recurring events require a <a href="#recurring-type">recurring type</a> and <a href="#recurs-until-date">date</a> that they recur until.')),""!=o("#end-date").val()){let e=new Date(o("#start-date").val()),t=new Date(o("#end-date").val());e&&t&&e.getDate()!=t.getDate()&&i.push("A recurring event instance start and end date must be the same day. If you need multiple multi-day (ongoing) occurrences, you must define them as separate datetime instances.")}n.setHours(0),n.setMinutes(0);r=new Date(o("#recurs-until-date").val());n>r&&(notifier.mark_input_invalid(o("#recurs-until-date")),i.push('The <a href="#recurs-until-date">"recurs until date"</a> must be on or after the start date.'))}"1"==o("#physical_location_check").val()&&("new"==o("#location").val()&&""==o("#location-name").val()&&(notifier.mark_input_invalid(o("#location-name")),i.push('You must give your new location a <a href="#location-name">name</a>.')),"new"==o("#location").val()&&""==o("#location-address-1").val()&&(notifier.mark_input_invalid(o("#location-address-1")),i.push('You must give your new location a <a href="#location-address-1">address</a>.')),"new"==o("#location").val()&&""==o("#location-city").val()&&(notifier.mark_input_invalid(o("#location-city")),i.push('You must give your new location a <a href="#location-city">city</a>.')),"new"==o("#location").val()&&""==o("#location-state").val()&&(notifier.mark_input_invalid(o("#location-state")),i.push('You must give your new location a <a href="#location-state">state</a>.')),"new"==o("#location").val()&&""==o("#location-zip").val()&&(notifier.mark_input_invalid(o("#location-zip")),i.push('You must give your new location a <a href="#location-zip">zip</a>.')),"new"!=o("#location").val()||""===o("#location-webpage").val()||isUrlValid(o("#location-webpage").val())||(notifier.mark_input_invalid(o("#location-webpage")),i.push('<a href="#location-webpage"> Location URL</a> is not a valid URL.'))),"1"==o("#virtual_location_check").val()&&("new"==o("#v-location").val()&&""==o("#new-v-location-name").val()&&(notifier.mark_input_invalid(o("#new-v-location-name")),i.push('You must give your new virtual location a <a href="#new-v-location-name">name</a>.')),"new"==o("#v-location").val()&&""==o("#new-v-location-url").val()?(notifier.mark_input_invalid(o("#new-v-location-url")),i.push('You must give your new virtual location a <a href="#new-v-location-url">URL</a>.')):"new"!=o("#v-location").val()||""===o("#new-v-location-url").val()||isUrlValid(o("#new-v-location-url").val())||(notifier.mark_input_invalid(o("#new-v-location-url")),i.push('<a href="#new-v-location-url">Virtual Location URL</a> is not a valid URL.'))),0<i.length&&(e.preventDefault(),notifier.alert("Sorry! We couldn't create your event","<ul><li>"+i.join("</li><li>")+"</li></ul>"))})});