function isUrlValid(e){let t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol}const time_mode_radios=Array.from(document.querySelectorAll('input[type="radio"][name="time_mode"]')),time_container=document.getElementById("time-container"),start_time_container=document.getElementById("start-time-container"),end_time_container=document.getElementById("end-time-container");time_mode_radios.forEach(e=>{e.addEventListener("input",()=>{var e=time_mode_radios.filter(e=>e.checked)[0];e.id===time_mode_regular?(time_container.classList.remove("dcf-d-none"),start_time_container.classList.remove("dcf-d-none"),end_time_container.classList.remove("dcf-d-none")):e.id===time_mode_end_time_only?(time_container.classList.remove("dcf-d-none"),start_time_container.classList.add("dcf-d-none"),end_time_container.classList.remove("dcf-d-none")):e.id===time_mode_start_time_only?(time_container.classList.remove("dcf-d-none"),start_time_container.classList.remove("dcf-d-none"),end_time_container.classList.add("dcf-d-none")):time_container.classList.add("dcf-d-none")})}),require(["jquery"],function(l){l("#add-datetime-form").submit(function(e){let t=[],a=(""==l("#start-date").val()&&(""==l("#start-date").val()&&notifier.mark_input_invalid(l("#start-date")),t.push('<a href="#location">Location</a> and <a href="#start-date">start date</a> are required.')),new Date(l("#start-date").val()));var i=l("#start-time-am-pm-pm").is(":checked")?"pm":"am";let n=""!=l("#start-time-hour").val()?parseInt(l("#start-time-hour").val())%12:0;n="pm"==i?n+12:n;i=""!=l("#start-time-minute").val()?parseInt(l("#start-time-minute").val()):0;a.setHours(n),a.setMinutes(i);let o=new Date(l("#start-date").val());i=l("#end-time-am-pm-pm").is(":checked")?"pm":"am";let r=""!=l("#end-time-hour").val()?parseInt(l("#end-time-hour").val())%12:0;r="pm"==i?r+12:r;var i=""!=l("#end-time-minute").val()?parseInt(l("#end-time-minute").val()):0;o.setHours(r),o.setMinutes(i),""!=l("#start-date").val()&&l("#"+time_mode_regular).is(":checked")&&a>o&&(notifier.mark_input_invalid(l("#end-time-container")),t.push('Your <a href="#end-time-container">end time</a> must be on or after the <a href="#start-time-container">start time</a>.')),""!=l("#start-date").val()&&l("#recurring").is(":checked")&&(""!=l("#recurring-type").val()&&""!=l("#recurs-until-date").val()||(""==l("#recurring-type").val()&&notifier.mark_input_invalid(l("#recurring-type")),""==l("#recurs-until-date").val()&&notifier.mark_input_invalid(l("#recurs-until-date")),t.push('Recurring events require a <a href="#recurring-type">recurring type</a> and <a href="#recurs-until-date">date</a> that they recur until.')),a.setHours(0),a.setMinutes(0),i=new Date(l("#recurs-until-date").val()),a>i&&(notifier.mark_input_invalid(l("#recurs-until-date")),t.push('The <a href="#recurs-until-date">"recurs until date"</a> must be on or after the start date.'))),"1"==l("#physical_location_check").val()&&("new"==l("#location").val()&&""==l("#location-name").val()&&(notifier.mark_input_invalid(l("#location-name")),t.push('You must give your new location a <a href="#location-name">name</a>.')),"new"==l("#location").val()&&""==l("#location-address-1").val()&&(notifier.mark_input_invalid(l("#location-address-1")),t.push('You must give your new location a <a href="#location-address-1">address</a>.')),"new"==l("#location").val()&&""==l("#location-city").val()&&(notifier.mark_input_invalid(l("#location-city")),t.push('You must give your new location a <a href="#location-city">city</a>.')),"new"==l("#location").val()&&""==l("#location-state").val()&&(notifier.mark_input_invalid(l("#location-state")),t.push('You must give your new location a <a href="#location-state">state</a>.')),"new"==l("#location").val()&&""==l("#location-zip").val()&&(notifier.mark_input_invalid(l("#location-zip")),t.push('You must give your new location a <a href="#location-zip">zip</a>.')),"new"!=l("#location").val()||""===l("#location-webpage").val()||isUrlValid(l("#location-webpage").val())||(notifier.mark_input_invalid(l("#location-webpage")),t.push('<a href="#location-webpage"> Location URL</a> is not a valid URL.'))),"1"==l("#virtual_location_check").val()&&("new"==l("#v-location").val()&&""==l("#new-v-location-name").val()&&(notifier.mark_input_invalid(l("#new-v-location-name")),t.push('You must give your new virtual location a <a href="#new-v-location-name">name</a>.')),"new"==l("#v-location").val()&&""==l("#new-v-location-url").val()?(notifier.mark_input_invalid(l("#new-v-location-url")),t.push('You must give your new virtual location a <a href="#new-v-location-url">URL</a>.')):"new"!=l("#v-location").val()||""===l("#new-v-location-url").val()||isUrlValid(l("#new-v-location-url").val())||(notifier.mark_input_invalid(l("#new-v-location-url")),t.push('<a href="#new-v-location-url">Virtual Location URL</a> is not a valid URL.'))),0<t.length&&(e.preventDefault(),notifier.alert("Sorry! We couldn't create your event","<ul><li>"+t.join("</li><li>")+"</li></ul>"))})});