function isUrlValid(a){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)}require(["jquery"],function(n){n("#add-datetime-form").submit(function(a){errors=[],""==n("#start-date").val()&&(""==n("#start-date").val()&&notifier.mark_input_invalid(n("#start-date")),errors.push('<a href="#location">Location</a> and <a href="#start-date">start date</a> are required.'));var e,t,r,i=new Date(n("#start-date").val());""!=n("#start-date").val()&&""!=n("#end-date").val()&&(e=new Date(n("#end-date").val()),t=n("#start-time-am-pm-pm").is(":checked")?"pm":"am",r=""!=n("#start-time-hour").val()?parseInt(n("#start-time-hour").val())%12:0,r="pm"==t?r+12:r,t=""!=n("#start-time-minute").val()?parseInt(n("#start-time-minute").val()):0,i.setHours(r),i.setMinutes(t),r=n("#end-time-am-pm-pm").is(":checked")?"pm":"am",t=""!=n("#end-time-hour").val()?parseInt(n("#end-time-hour").val())%12:0,t="pm"==r?t+12:t,r=""!=n("#end-time-minute").val()?parseInt(n("#end-time-minute").val()):0,e.setHours(t),e.setMinutes(r),e<i&&(notifier.mark_input_invalid(n("#end-date")),errors.push('Your <a href="#end-date">end date/time</a> must be on or after the <a href="#start-date">start date/time</a>.'))),""!=n("#start-date").val()&&n("#recurring").is(":checked")&&(""!=n("#recurring-type").val()&&""!=n("#recurs-until-date").val()||(""==n("#recurring-type").val()&&notifier.mark_input_invalid(n("#recurring-type")),""==n("#recurs-until-date").val()&&notifier.mark_input_invalid(n("#recurs-until-date")),errors.push('Recurring events require a <a href="#recurring-type">recurring type</a> and <a href="#recurs-until-date">date</a> that they recur until.')),""!=n("#end-date").val()&&(t=new Date(n("#start-date").val()),r=new Date(n("#end-date").val()),t&&r&&t.getDate()!=r.getDate()&&errors.push("A recurring event instance start and end date must be the same day. If you need multiple multi-day (ongoing) occurrences, you must define them as separate datetime instances.")),i.setHours(0),i.setMinutes(0),new Date(n("#recurs-until-date").val())<i&&(notifier.mark_input_invalid(n("#recurs-until-date")),errors.push('The <a href="#recurs-until-date">"recurs until date"</a> must be on or after the start date.'))),"1"==n("#physical_location_check").val()&&("new"==n("#location").val()&&""==n("#location-name").val()&&(notifier.mark_input_invalid(n("#location-name")),errors.push('You must give your new location a <a href="#location-name">name</a>.')),"new"==n("#location").val()&&""==n("#location-address-1").val()&&(notifier.mark_input_invalid(n("#location-address-1")),errors.push('You must give your new location a <a href="#location-address-1">address</a>.')),"new"==n("#location").val()&&""==n("#location-city").val()&&(notifier.mark_input_invalid(n("#location-city")),errors.push('You must give your new location a <a href="#location-city">city</a>.')),"new"==n("#location").val()&&""==n("#location-state").val()&&(notifier.mark_input_invalid(n("#location-state")),errors.push('You must give your new location a <a href="#location-state">state</a>.')),"new"==n("#location").val()&&""==n("#location-zip").val()&&(notifier.mark_input_invalid(n("#location-zip")),errors.push('You must give your new location a <a href="#location-zip">zip</a>.')),"new"!=n("#location").val()||""===n("#location-webpage").val()||isUrlValid(n("#location-webpage").val())||(notifier.mark_input_invalid(n("#location-webpage")),errors.push('<a href="#location-webpage"> Location URL</a> is not a valid URL.'))),"1"==n("#virtual_location_check").val()&&("new"==n("#v-location").val()&&""==n("#new-v-location-name").val()&&(notifier.mark_input_invalid(n("#new-v-location-name")),errors.push('You must give your new virtual location a <a href="#new-v-location-name">name</a>.')),"new"==n("#v-location").val()&&""==n("#new-v-location-url").val()?(notifier.mark_input_invalid(n("#new-v-location-url")),errors.push('You must give your new virtual location a <a href="#new-v-location-url">URL</a>.')):"new"!=n("#v-location").val()||""===n("#new-v-location-url").val()||isUrlValid(n("#new-v-location-url").val())||(notifier.mark_input_invalid(n("#new-v-location-url")),errors.push('<a href="#new-v-location-url">Virtual Location URL</a> is not a valid URL.'))),0<errors.length&&(a.preventDefault(),notifier.alert("Sorry! We couldn't create your event","<ul><li>"+errors.join("</li><li>")+"</li></ul>"))})});